<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calculadora de Honorários</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; background:#0b1020; color:#fff; }
  .container { max-width: 960px; margin: 0 auto; padding: 24px; }
  .card { background: #141a35; border-radius: 16px; padding: 24px; box-shadow: 0 6px 24px rgba(0,0,0,.25); }
  h1 { font-size: 1.6rem; margin: 0 0 16px; }
  label { display:block; margin: 12px 0 6px; opacity:.9 }
  input, select { width: 100%; padding: 12px 14px; border-radius: 10px; border: 1px solid #2b345f; background: #0f1430; color: #fff; }
  .row { display:grid; grid-template-columns: 1fr; gap: 16px; }
  @media(min-width: 720px) { .row { grid-template-columns: repeat(2, 1fr); } }
  .result { font-size: 1.2rem; margin-top: 12px; }
  .highlight { color:#7cf6c5; font-weight:700; }
  .muted { color:#9fb0ff; }
  .footer { opacity:.7; margin-top:16px; font-size:.9rem; }
  .grid-3 { display:grid; grid-template-columns: repeat(3,1fr); gap: 12px; }
</style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Calculadora de Honorários</h1>
      <div class="row">
        <div>
          <label for="ramo">Ramo da sua empresa</label>
          <select id="ramo"></select>
        </div>
        <div>
          <label for="faixa">Faturamento mensal</label>
          <select id="faixa"></select>
        </div>
        <div>
          <label for="socios">Sócio(s) com pró-labore</label>
          <input id="socios" type="number" min="0" value="0" />
        </div>
        <div>
          <label for="empregados">Empregados</label>
          <input id="empregados" type="number" min="0" value="0" />
        </div>
        <div>
          <label for="paga">Quanto você paga atualmente? (R$)</label>
          <input id="paga" type="number" min="0" value="0" />
        </div>
      </div>

      <div class="result">
        <div class="grid-3">
          <div><span class="muted">Valor da mensalidade:</span><br><span id="mensal" class="highlight">R$ 0,00</span></div>
          <div><span class="muted">Economia mensal:</span><br><span id="econ_m" class="highlight">R$ 0,00</span></div>
          <div><span class="muted">Economia anual:</span><br><span id="econ_a" class="highlight">R$ 0,00</span></div>
        </div>
      </div>

      <div class="footer">Obs.: valores baseados na sua planilha. Ajuste no arquivo <code>precos.json</code> conforme necessário.</div>
    </div>
  </div>
  <script>
    const fmt = v => v.toLocaleString('pt-BR', {style:'currency', currency:'BRL'});
    let tabela = null;
    let faixas = null;
    let valorPessoa = 48;

    async function load(){
      const res = await fetch('precos.json');
      const js = await res.json();
      tabela = js.tabela; faixas = js.faixas; valorPessoa = js.valor_por_pessoa || 48;
      const ramoSel = document.getElementById('ramo');
      Object.keys(tabela).forEach(r => {
        const opt = document.createElement('option'); opt.value=r; opt.textContent=r; ramoSel.appendChild(opt);
      });
      const faixaSel = document.getElementById('faixa');
      faixas.forEach(f => { const opt=document.createElement('option'); opt.value=f; opt.textContent=f; faixaSel.appendChild(opt); });
      ['ramo','faixa','socios','empregados','paga'].forEach(id => document.getElementById(id).addEventListener('input', calc));
      calc();
    }

    function calc(){
      const ramo = document.getElementById('ramo').value;
      const faixa = document.getElementById('faixa').value;
      const socios = parseInt(document.getElementById('socios').value||'0',10);
      const empregados = parseInt(document.getElementById('empregados').value||'0',10);
      const paga = parseFloat(document.getElementById('paga').value||'0');
      let base = 0;
      if(tabela && tabela[ramo] && tabela[ramo][faixa] != null){ base = tabela[ramo][faixa]; }
      const mensal = base + (socios + empregados) * valorPessoa;
      const econ_m = Math.max(0, paga - mensal);
      const econ_a = econ_m * 12;
      document.getElementById('mensal').textContent = fmt(mensal);
      document.getElementById('econ_m').textContent = fmt(econ_m);
      document.getElementById('econ_a').textContent = fmt(econ_a);
    }

    load();
  </script>
</body>
</html>